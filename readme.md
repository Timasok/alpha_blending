# Alpha_Blending

Задача состояла в оптимизации алгоритма альфа-смешения. Альфа-смешивание - это процесс объединения одного изображения с фоном для создания видимости частичной или полной прозрачности.

В качестве фона я использовал изображение стола:

![Table](img/Table.bmp)

В качестве накладываемого изобажения я использовал этого котика:

![Cat](img/AskhatCat.bmp)

Результат наложения получался следующим:

![result](img/result_example.bmp)

# Algorithm

Суть алгоритма такова: В области, где изображения не накладываются, цвет итогового изображения равен цвету фона. В остальной области цвет каждого пикселя задаётся по следующему правилу:

~~~C++
result_pixel.color = (front_pixel.alpha*front_pixel.color + (255 - front_pixel.alpha)*back_pixel.color)/255
~~~

# Optimization 

Для ускорения данного алгоритма я пользовался SIMD-инструкциями(128-bit intel SSE intrinsics), а также флагами оптимизации компилятора.

С помощью библиотеки 
>sf::Clock
я измерял время формирования итогового изображения. Внизу приведена таблица результатов, где скорость работы алгоритма выражается в FPS.

# Results

| O_flag | SSE/NO SSE  |  FPS  |  Coeff |
| :----: |  :--------: | :---: | :----: |
|  -O0   |    NO SSE   | **231.8** |  1     |
|  -O2   |    NO SSE   | 519.2 |  2.23  |
|  -O3   |    NO SSE   | 489.0 |  2.11  |
| -Ofast |    NO SSE   | 470.4 |  2.03  |
|  -O0   |     SSE     |       |        |
|  -O2   |     SSE     |       |        |
|  -O3   |     SSE     |       |        |
| -Ofast |     SSE     | ***шиш***  |        |
