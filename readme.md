# Alpha_Blending

Задача состояла в оптимизации алгоритма альфа-смешения. Альфа-смешивание - это процесс объединения одного изображения с фоном для создания видимости частичной или полной прозрачности.

В качестве фона я использовал изображение стола:

![Table](img/Table.bmp)

В качестве накладываемого изобажения я использовал этого котика:

![Cat](img/AskhatCat.bmp)

Результат наложения получался следующим:

![result](img/result_example.bmp)

# Algorithm

Суть алгоритма такова: В области, где изображения не накладываются, цвет итогового изображения равен цвету фона. В остальной области цвет каждого пикселя задаётся по следующему правилу:

~~~C++
result_pixel.color = (front_pixel.alpha*front_pixel.color + (255 - front_pixel.alpha)*back_pixel.color)/255
~~~

# Optimization 

Для ускорения данного алгоритма я пользовался SIMD-инструкциями(128-bit intel SSE intrinsics), а также флагами оптимизации компилятора.

С помощью библиотеки 
>sf::Clock
я измерял время формирования итогового изображения. Внизу приведена таблица результатов, где скорость работы алгоритма выражается в FPS.

# Results

| O_flag | SSE/NO SSE  |  FPS  |  Coeff |
| :----: |  :--------: | :---: | :----: |
|  -O0   |    NO SSE   | **4200** |  1     |
|  -O2   |    NO SSE   | 15800 |  3.76  |
|  -O3   |    NO SSE   | 16400 |  3.90  |
| -Ofast |    NO SSE   | 16200 |  3.86  |
|  -O0   |     SSE     |  4400 |  1.01  |
|  -O2   |     SSE     | 14500 |  3.45  |
|  -O3   |     SSE     | **18300**  |  4.35  |
| -Ofast |     SSE     | 13500 |  3.21  |
